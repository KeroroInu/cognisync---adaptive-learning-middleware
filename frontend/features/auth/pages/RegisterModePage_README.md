# RegisterModePage - æ³¨å†Œæµç¨‹è¯´æ˜

## ğŸ“‹ æ¦‚è¿°

RegisterModePage æ˜¯ä¼ä¸šçº§æ³¨å†Œé¡µé¢ï¼Œé‡‡ç”¨**ä¸¤æ­¥æ³¨å†Œæµç¨‹**ï¼š
1. æ”¶é›†åŸºç¡€ä¿¡æ¯ï¼ˆname, email, passwordï¼‰
2. é€‰æ‹©æ³¨å†Œæ¨¡å¼ï¼ˆé‡è¡¨æ³¨å†Œ vs AIå¼•å¯¼æ³¨å†Œï¼‰

---

## ğŸ”„ æ³¨å†Œæµç¨‹è¯¦è§£

### å®Œæ•´æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·è®¿é—®æ³¨å†Œé¡µé¢                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ç¬¬ä¸€æ­¥ï¼šå¡«å†™åŸºç¡€ä¿¡æ¯                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ 1. å§“åï¼ˆå¯é€‰ä½†å»ºè®®ï¼‰                          â”‚     â”‚
â”‚  â”‚ 2. é‚®ç®±åœ°å€ï¼ˆå¿…å¡«ï¼Œå”¯ä¸€ï¼‰                     â”‚     â”‚
â”‚  â”‚ 3. å¯†ç ï¼ˆâ‰¥6å­—ç¬¦ï¼Œå«å­—æ¯å’Œæ•°å­—ï¼‰              â”‚     â”‚
â”‚  â”‚ 4. ç¡®è®¤å¯†ç ï¼ˆä¸å¯†ç ä¸€è‡´ï¼‰                     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                    â”‚                                    â”‚
â”‚                    â”‚ [ç‚¹å‡»"ä¸‹ä¸€æ­¥"]                      â”‚
â”‚                    â–¼                                    â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚            â”‚ å‰ç«¯éªŒè¯     â”‚                              â”‚
â”‚            â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                  â”‚ âœ… éªŒè¯é€šè¿‡                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ç¬¬äºŒæ­¥ï¼šé€‰æ‹©æ³¨å†Œæ¨¡å¼                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   é‡è¡¨æ³¨å†Œ           â”‚   â”‚   AIå¼•å¯¼æ³¨å†Œ         â”‚    â”‚
â”‚  â”‚  - æ ‡å‡†Likerté‡è¡¨    â”‚   â”‚  - è‡ªç„¶å¯¹è¯          â”‚    â”‚
â”‚  â”‚  - å¿«é€Ÿå®Œæˆ          â”‚   â”‚  - æ·±å…¥æ¢ç´¢          â”‚    â”‚
â”‚  â”‚  - 5-10åˆ†é’Ÿ          â”‚   â”‚  - 10-15åˆ†é’Ÿ         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚            â”‚                          â”‚                 â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚ [ç‚¹å‡»"é€‰æ‹©æ­¤æ–¹å¼"]
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               è°ƒç”¨æ³¨å†Œ API                               â”‚
â”‚  POST /api/auth/register                                â”‚
â”‚  Body: { email, password, name?, mode: 'scale'|'ai' }  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                       â”‚
        â–¼                       â–¼
   âœ… æˆåŠŸ                   âŒ å¤±è´¥
        â”‚                       â”‚
        â”‚                       â”œâ”€â†’ é‚®ç®±å·²æ³¨å†Œ â†’ æç¤º + "è¿”å›ç™»å½•"é“¾æ¥
        â”‚                       â”œâ”€â†’ ç½‘ç»œé”™è¯¯ â†’ å‹å¥½æç¤º
        â”‚                       â””â”€â†’ å…¶ä»–é”™è¯¯ â†’ æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           æ³¨å†ŒæˆåŠŸï¼šä¿å­˜ token                           â”‚
â”‚  1. authStore.register() å†…éƒ¨è‡ªåŠ¨ä¿å­˜ token             â”‚
â”‚  2. tokenStorage.setToken(response.token)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                       â”‚
        â–¼                       â–¼
   mode='scale'             mode='ai'
        â”‚                       â”‚
        â–¼                       â–¼
  è·³è½¬åˆ°é‡è¡¨é¡µé¢            è·³è½¬åˆ°AIå¯¹è¯é¡µé¢
  /register/scale          /register/ai
        â”‚                       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
    åç»­è¯·æ±‚è‡ªåŠ¨å¸¦ä¸Š Authorization: Bearer {token}
    åç«¯ä» token è¯†åˆ« userIdï¼Œç»‘å®šæ•°æ®
```

---

## ğŸ¯ æ ¸å¿ƒè®¾è®¡å†³ç­–

### 1. ä¸ºä»€ä¹ˆåˆ†ä¸¤æ­¥ï¼Ÿ

**ä¼ä¸šå¸¸è§„å®è·µï¼š**
- âœ… å…ˆåˆ›å»ºè´¦æˆ·ï¼ˆæœ‰ userId å’Œ tokenï¼‰
- âœ… å†è¿›è¡Œå…¥èŒæµç¨‹ï¼ˆé‡è¡¨/AIå¯¹è¯ï¼‰
- âœ… å…¥èŒæµç¨‹ä¸­çš„æ‰€æœ‰æ•°æ®éƒ½èƒ½æ­£ç¡®ç»‘å®šåˆ° userId

**å¥½å¤„ï¼š**
- ç”¨æˆ·åœ¨å…¥èŒè¿‡ç¨‹ä¸­é€€å‡ºï¼Œè´¦æˆ·å·²å­˜åœ¨ï¼Œä¸‹æ¬¡å¯ç›´æ¥ç™»å½•ç»§ç»­
- åç«¯ API å¯ä»¥ä» token ä¸­è¯†åˆ«ç”¨æˆ·ï¼Œæ— éœ€åœ¨æ¯ä¸ªè¯·æ±‚ä¸­ä¼ é€’ userId
- ç»Ÿä¸€çš„è®¤è¯æµç¨‹ï¼Œä¾¿äºç»´æŠ¤

### 2. ä¸ºä»€ä¹ˆä¸ä¸€æ­¥åˆ°ä½ï¼Ÿ

**é¿å…çš„é—®é¢˜ï¼š**
- âŒ ç”¨æˆ·å¡«å®Œæ‰€æœ‰ä¿¡æ¯åï¼Œå‘ç°é‚®ç®±å·²æ³¨å†Œï¼ˆæµªè´¹æ—¶é—´ï¼‰
- âŒ å…¥èŒæµç¨‹ä¸­é€”å¤±è´¥ï¼Œè´¦æˆ·æœªåˆ›å»ºï¼Œæ•°æ®ä¸¢å¤±
- âŒ åç«¯éœ€è¦å¤„ç†"ä¸´æ—¶ç”¨æˆ·"é€»è¾‘ï¼Œå¢åŠ å¤æ‚åº¦

---

## ğŸ“ è¡¨å•éªŒè¯è§„åˆ™

### 1. å§“åï¼ˆå¯é€‰ï¼‰

```typescript
// å¦‚æœå¡«å†™ï¼Œè‡³å°‘2ä¸ªå­—ç¬¦
if (name && name.length < 2) {
  return 'å§“åè‡³å°‘éœ€è¦2ä¸ªå­—ç¬¦';
}
```

### 2. é‚®ç®±ï¼ˆå¿…å¡«ï¼‰

```typescript
// å¿…å¡«
if (!email) {
  return 'è¯·è¾“å…¥é‚®ç®±åœ°å€';
}

// æ ¼å¼éªŒè¯
const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
if (!emailRegex.test(email)) {
  return 'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®';
}
```

### 3. å¯†ç ï¼ˆå¿…å¡«ï¼‰

```typescript
// å¿…å¡«
if (!password) {
  return 'è¯·è¾“å…¥å¯†ç ';
}

// æœ€å°é•¿åº¦
if (password.length < 6) {
  return 'å¯†ç è‡³å°‘éœ€è¦6ä¸ªå­—ç¬¦';
}

// å¼ºåº¦æ£€æŸ¥ï¼ˆå¿…é¡»åŒ…å«å­—æ¯å’Œæ•°å­—ï¼‰
const hasNumber = /\d/.test(password);
const hasLetter = /[a-zA-Z]/.test(password);
if (!hasNumber || !hasLetter) {
  return 'å¯†ç éœ€è¦åŒ…å«å­—æ¯å’Œæ•°å­—';
}
```

### 4. ç¡®è®¤å¯†ç ï¼ˆå¿…å¡«ï¼‰

```typescript
// å¿…å¡«
if (!confirmPassword) {
  return 'è¯·å†æ¬¡è¾“å…¥å¯†ç ';
}

// ä¸€è‡´æ€§æ£€æŸ¥
if (password !== confirmPassword) {
  return 'ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´';
}
```

---

## ğŸš¨ é”™è¯¯å¤„ç†

### 1. é‚®ç®±å·²æ³¨å†Œ

**é”™è¯¯è¯†åˆ«ï¼š**
```typescript
if (err.code === 'EMAIL_EXISTS' || err.message?.includes('exists')) {
  setApiError('è¯¥é‚®ç®±å·²è¢«æ³¨å†Œ');
}
```

**ç”¨æˆ·å‹å¥½å¤„ç†ï¼š**
```tsx
<div className="bg-red-50 ...">
  <p>æ³¨å†Œå¤±è´¥</p>
  <p>è¯¥é‚®ç®±å·²è¢«æ³¨å†Œ</p>
  <button onClick={onNavigateToLogin}>è¿”å›ç™»å½•</button>
</div>
```

### 2. ç½‘ç»œé”™è¯¯

```typescript
if (err.code === 'NETWORK_ERROR') {
  setApiError('ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ');
}
```

### 3. å…¶ä»–é”™è¯¯

```typescript
setApiError(err.message || 'æ³¨å†Œå¤±è´¥');
```

---

## ğŸ¨ UI ç»„ä»¶å¤ç”¨

### 1. ç¬¬ä¸€æ­¥ï¼šåŸºç¡€ä¿¡æ¯è¡¨å•

**å¤ç”¨ç»„ä»¶ï¼š**
```tsx
<Input
  type="email"
  label={t.email}
  placeholder={t.emailPlaceholder}
  value={email}
  onChange={(e) => setEmail(e.target.value)}
  onBlur={handleEmailBlur}
  error={formErrors.email}
  required
/>

<Button
  type="submit"
  variant="primary"
  size="lg"
  className="w-full"
>
  ä¸‹ä¸€æ­¥ï¼šé€‰æ‹©æ³¨å†Œæ–¹å¼
</Button>
```

### 2. ç¬¬äºŒæ­¥ï¼šæ¨¡å¼é€‰æ‹©å¡ç‰‡

**å¸ƒå±€ï¼š**
```tsx
<div className="grid md:grid-cols-2 gap-6">
  {/* é‡è¡¨æ³¨å†Œå¡ç‰‡ */}
  <div className="glass-card p-6 ...">
    <div className="w-12 h-12 bg-gradient-to-br from-blue-500 to-cyan-600">
      <ClipboardList />
    </div>
    <h3>é‡è¡¨æ³¨å†Œ</h3>
    <ul>
      <li><Check /> æ ‡å‡†åŒ–Likerté‡è¡¨</li>
      <li><Check /> å¿«é€Ÿå®Œæˆ</li>
    </ul>
    <Button onClick={() => handleModeSelect('scale')}>
      é€‰æ‹©æ­¤æ–¹å¼
    </Button>
  </div>

  {/* AIå¼•å¯¼æ³¨å†Œå¡ç‰‡ */}
  <div className="glass-card p-6 ...">
    {/* ç±»ä¼¼ç»“æ„ */}
  </div>
</div>
```

---

## ğŸ” API è°ƒç”¨æµç¨‹

### 1. æ³¨å†Œè¯·æ±‚

**å‰ç«¯è°ƒç”¨ï¼š**
```typescript
await register({
  name: name.trim() || undefined,  // å¯é€‰ï¼Œç©ºåˆ™ä¸ä¼ 
  email: email.trim(),              // å¿…å¡«
  password,                         // å¿…å¡«
  mode,                             // 'scale' | 'ai'
});
```

**å¯¹åº”çš„ APIï¼š**
```http
POST /api/auth/register
Content-Type: application/json

{
  "name": "å¼ ä¸‰",
  "email": "zhangsan@example.com",
  "password": "password123",
  "mode": "scale"
}
```

**å“åº”ï¼š**
```json
{
  "success": true,
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIs...",
    "user": {
      "id": "uuid-xxx",
      "email": "zhangsan@example.com",
      "name": "å¼ ä¸‰",
      "createdAt": "2026-02-12T10:00:00Z",
      "hasCompletedOnboarding": false
    }
  }
}
```

### 2. Token è‡ªåŠ¨ä¿å­˜

**authStore.register() å†…éƒ¨ï¼š**
```typescript
// features/auth/api.ts
export async function register(data: RegisterRequest): Promise<AuthResponse> {
  const response = await apiClient.post<AuthResponse>('/api/auth/register', data, {
    skipAuth: true,
  });

  // è‡ªåŠ¨ä¿å­˜ token
  if (response.token) {
    tokenStorage.setToken(response.token);
  }

  return response;
}
```

### 3. åç»­è¯·æ±‚è‡ªåŠ¨å¸¦ Token

**åç»­å…¥èŒæµç¨‹ï¼š**
```http
POST /api/forms/abc123/submit
Authorization: Bearer eyJhbGciOiJIUzI1NiIs...
Content-Type: application/json

{
  "answers": [...]
}
```

**åç«¯ä» token è¯†åˆ«ç”¨æˆ·ï¼š**
```python
@router.post("/api/forms/{template_id}/submit")
async def submit_scale(
    template_id: str,
    data: ScaleSubmitRequest,
    current_user: User = Depends(get_current_user)  # ä» token è§£æ
):
    # current_user.id å°±æ˜¯ userId
    # ç»‘å®šæ•°æ®åˆ°è¯¥ç”¨æˆ·
    pass
```

---

## ğŸ“± å“åº”å¼è®¾è®¡

### æ¡Œé¢ç«¯ï¼ˆâ‰¥768pxï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           æ³¨å†Œæ ‡é¢˜                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é‡è¡¨æ³¨å†Œå¡ç‰‡   â”‚  AIå¼•å¯¼æ³¨å†Œå¡ç‰‡    â”‚
â”‚  - å›¾æ ‡æ ‡é¢˜     â”‚  - å›¾æ ‡æ ‡é¢˜        â”‚
â”‚  - ç‰¹ç‚¹åˆ—è¡¨     â”‚  - ç‰¹ç‚¹åˆ—è¡¨        â”‚
â”‚  - é€‰æ‹©æŒ‰é’®     â”‚  - é€‰æ‹©æŒ‰é’®        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç§»åŠ¨ç«¯ï¼ˆ<768pxï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   æ³¨å†Œæ ‡é¢˜        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é‡è¡¨æ³¨å†Œå¡ç‰‡     â”‚
â”‚  - å›¾æ ‡æ ‡é¢˜       â”‚
â”‚  - ç‰¹ç‚¹åˆ—è¡¨       â”‚
â”‚  - é€‰æ‹©æŒ‰é’®       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  AIå¼•å¯¼æ³¨å†Œå¡ç‰‡   â”‚
â”‚  - å›¾æ ‡æ ‡é¢˜       â”‚
â”‚  - ç‰¹ç‚¹åˆ—è¡¨       â”‚
â”‚  - é€‰æ‹©æŒ‰é’®       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€ä½¿ç”¨

```tsx
import { RegisterModePage } from './features/auth/pages/RegisterModePage';

function RegisterRoute() {
  const navigate = useNavigate();

  const handleRegisterSuccess = (mode: 'scale' | 'ai') => {
    // æ³¨å†ŒæˆåŠŸï¼Œè·³è½¬åˆ°å¯¹åº”çš„å…¥èŒæµç¨‹
    if (mode === 'scale') {
      navigate('/register/scale');
    } else {
      navigate('/register/ai');
    }
  };

  return (
    <RegisterModePage
      language="zh"
      onRegisterSuccess={handleRegisterSuccess}
      onNavigateToLogin={() => navigate('/login')}
    />
  );
}
```

### é…åˆè·¯ç”±å®ˆå«

```tsx
import { PublicOnly } from './routes/PublicOnly';

function RegisterRoute() {
  return (
    <PublicOnly onAuthorized={() => navigate('/dashboard')}>
      <RegisterModePage
        language="zh"
        onRegisterSuccess={(mode) => {
          navigate(mode === 'scale' ? '/register/scale' : '/register/ai');
        }}
        onNavigateToLogin={() => navigate('/login')}
      />
    </PublicOnly>
  );
}
```

---

## ğŸ”„ çŠ¶æ€è½¬æ¢

```
[åˆå§‹çŠ¶æ€]
  showModeSelection = false
  formErrors = {}
  apiError = null
  â†“
[ç”¨æˆ·å¡«å†™åŸºç¡€ä¿¡æ¯]
  â†“
[ç‚¹å‡»"ä¸‹ä¸€æ­¥"]
  â†“
[å‰ç«¯éªŒè¯]
  â†“ âœ… é€šè¿‡
[showModeSelection = true]
  â†“
[æ˜¾ç¤ºæ¨¡å¼é€‰æ‹©]
  â†“
[ç‚¹å‡»æŸä¸ªæ¨¡å¼]
  â†“
[selectedMode = 'scale'/'ai']
[isLoading = true]
  â†“
[è°ƒç”¨ register API]
  â†“
  â”œâ”€â†’ âœ… æˆåŠŸ
  â”‚     â†“
  â”‚   [è·³è½¬åˆ°å…¥èŒæµç¨‹]
  â”‚
  â””â”€â†’ âŒ å¤±è´¥
        â†“
      [isLoading = false]
      [selectedMode = null]
      [apiError = é”™è¯¯ä¿¡æ¯]
```

---

## âœ… æœ€ä½³å®è·µ

### 1. å¯†ç å¼ºåº¦

**å»ºè®®è§„åˆ™ï¼š**
- âœ… æœ€å°é•¿åº¦ 8 ä¸ªå­—ç¬¦ï¼ˆå½“å‰ä¸º 6ï¼‰
- âœ… å¿…é¡»åŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—ã€ç‰¹æ®Šå­—ç¬¦
- âœ… ä¸èƒ½æ˜¯å¸¸è§å¼±å¯†ç ï¼ˆ123456ã€password ç­‰ï¼‰

**å®ç°ï¼š**
```typescript
const hasUpperCase = /[A-Z]/.test(password);
const hasLowerCase = /[a-z]/.test(password);
const hasNumber = /\d/.test(password);
const hasSpecial = /[!@#$%^&*]/.test(password);

if (!hasUpperCase || !hasLowerCase || !hasNumber || !hasSpecial) {
  return 'å¯†ç éœ€è¦åŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦';
}
```

### 2. é‚®ç®±éªŒè¯

**åç«¯éªŒè¯ï¼š**
- å‘é€éªŒè¯é‚®ä»¶
- ç”¨æˆ·ç‚¹å‡»é“¾æ¥æ¿€æ´»è´¦æˆ·
- æ¿€æ´»åæ‰èƒ½ä½¿ç”¨å®Œæ•´åŠŸèƒ½

### 3. é˜²æ­¢é‡å¤æäº¤

```tsx
<Button
  onClick={() => handleModeSelect('scale')}
  disabled={isLoading}              // Loading æ—¶ç¦ç”¨
  isLoading={selectedMode === 'scale' && isLoading}
>
  {selectedMode === 'scale' && isLoading ? 'æ³¨å†Œä¸­...' : 'é€‰æ‹©æ­¤æ–¹å¼'}
</Button>
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: ç”¨æˆ·å¡«å®ŒåŸºç¡€ä¿¡æ¯åï¼Œç‚¹å‡»æ¨¡å¼æ—¶æ‰å‘ç°é‚®ç®±å·²æ³¨å†Œï¼Ÿ

**A:** å¯ä»¥åœ¨"ä¸‹ä¸€æ­¥"æ—¶å…ˆè°ƒç”¨åç«¯æ£€æŸ¥é‚®ç®±æ˜¯å¦å­˜åœ¨ï¼š

```typescript
// å¯é€‰ï¼šé¢„æ£€æŸ¥é‚®ç®±
const checkEmailExists = async (email: string): Promise<boolean> => {
  try {
    await apiClient.get(`/api/auth/check-email?email=${email}`);
    return false; // ä¸å­˜åœ¨
  } catch (err: any) {
    if (err.code === 'EMAIL_EXISTS') {
      return true; // å·²å­˜åœ¨
    }
    throw err;
  }
};
```

### Q2: å¦‚ä½•è®©å§“åå˜ä¸ºå¿…å¡«ï¼Ÿ

**A:** ä¿®æ”¹éªŒè¯å‡½æ•°ï¼š

```typescript
function validateName(name: string, language: Language): string | null {
  if (!name) {
    return language === 'zh' ? 'è¯·è¾“å…¥å§“å' : 'Name is required';
  }
  if (name.length < 2) {
    return language === 'zh' ? 'å§“åè‡³å°‘éœ€è¦2ä¸ªå­—ç¬¦' : 'Name must be at least 2 characters';
  }
  return null;
}
```

### Q3: å¦‚ä½•æ·»åŠ æ‰‹æœºå·æ³¨å†Œï¼Ÿ

**A:** æ·»åŠ æ‰‹æœºå·è¾“å…¥æ¡†ï¼š

```tsx
<Input
  type="tel"
  label="æ‰‹æœºå·"
  placeholder="13800138000"
  value={phone}
  onChange={(e) => setPhone(e.target.value)}
  error={formErrors.phone}
/>
```

éªŒè¯å‡½æ•°ï¼š
```typescript
function validatePhone(phone: string, language: Language): string | null {
  if (!phone) {
    return language === 'zh' ? 'è¯·è¾“å…¥æ‰‹æœºå·' : 'Phone is required';
  }

  const phoneRegex = /^1[3-9]\d{9}$/;
  if (!phoneRegex.test(phone)) {
    return language === 'zh' ? 'æ‰‹æœºå·æ ¼å¼ä¸æ­£ç¡®' : 'Invalid phone number';
  }

  return null;
}
```

---

## ğŸ“Š æ•°æ®æµå‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   å‰ç«¯ç»„ä»¶                              â”‚
â”‚  RegisterModePage                                      â”‚
â”‚    â†“                                                   â”‚
â”‚  useAuth().register({ email, password, mode })        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              features/auth/api.ts                      â”‚
â”‚  register(data) {                                      â”‚
â”‚    const response = await apiClient.post(             â”‚
â”‚      '/api/auth/register',                            â”‚
â”‚      data,                                            â”‚
â”‚      { skipAuth: true }                               â”‚
â”‚    );                                                 â”‚
â”‚    tokenStorage.setToken(response.token);            â”‚
â”‚    return response;                                   â”‚
â”‚  }                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               lib/apiClient.ts                         â”‚
â”‚  apiClient.post() {                                    â”‚
â”‚    fetch('/api/auth/register', {                      â”‚
â”‚      method: 'POST',                                  â”‚
â”‚      headers: { 'Content-Type': 'application/json' }, â”‚
â”‚      body: JSON.stringify(data)                       â”‚
â”‚    })                                                 â”‚
â”‚  }                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               åç«¯ API                                  â”‚
â”‚  POST /api/auth/register                               â”‚
â”‚  {                                                     â”‚
â”‚    "email": "user@example.com",                       â”‚
â”‚    "password": "password123",                         â”‚
â”‚    "name": "å¼ ä¸‰",                                     â”‚
â”‚    "mode": "scale"                                    â”‚
â”‚  }                                                     â”‚
â”‚    â†“                                                   â”‚
â”‚  1. éªŒè¯é‚®ç®±æ˜¯å¦å·²å­˜åœ¨                                  â”‚
â”‚  2. å“ˆå¸Œå¯†ç                                            â”‚
â”‚  3. åˆ›å»ºç”¨æˆ·è®°å½•ï¼ˆuser_id, email, name, modeï¼‰         â”‚
â”‚  4. ç”Ÿæˆ JWT token                                     â”‚
â”‚  5. è¿”å› { token, user }                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           å‰ç«¯ä¿å­˜ token                                â”‚
â”‚  tokenStorage.setToken(token)                         â”‚
â”‚    â†“                                                   â”‚
â”‚  localStorage.setItem('access_token', token)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           è·³è½¬åˆ°å…¥èŒæµç¨‹                                â”‚
â”‚  mode === 'scale' â†’ /register/scale                   â”‚
â”‚  mode === 'ai'    â†’ /register/ai                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**æœ€åæ›´æ–°**: 2026-02-12
**ç‰ˆæœ¬**: 1.0.0
